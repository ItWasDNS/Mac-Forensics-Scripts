[Module Metadata]
AUTHOR=Matthew Sprengel
MODULE_NOTES=

[Database Metadata]
DATABASE=knowledgeC.db
PLATFORMS=macOS
VERSIONS=10.14

[Query Metadata]
QUERY_NAME=knowledge_app_entities
ACTIVITY=Application Activity
KEY_TIMESTAMP=ENTRY CREATION

[SQL Query 10.14]
QUERY=
	SELECT
        ZSTRUCTUREDMETADATA.Z_CDENTITYMETADATAKEY__NAME AS "ENTITY EXTRACTED",
        ZSOURCE.ZBUNDLEID AS "BUNDLE ID",
        ZSOURCE.ZGROUPID AS "GROUP ID",
        ZSTRUCTUREDMETADATA.Z_CDPORTRAITMETADATAKEY__OSBUILD AS "OS BUILD",
		CASE ZOBJECT.ZSTARTDAYOFWEEK
			WHEN "1" THEN "Sunday"
			WHEN "2" THEN "Monday"
			WHEN "3" THEN "Tuesday"
			WHEN "4" THEN "Wednesday"
			WHEN "5" THEN "Thursday"
			WHEN "6" THEN "Friday"
			WHEN "7" THEN "Saturday"
		END "DAY OF WEEK",
		ZOBJECT.ZSECONDSFROMGMT/3600 AS "GMT OFFSET",
		DATETIME(ZOBJECT.ZSTARTDATE+978307200,'UNIXEPOCH') as "START", 
		DATETIME(ZOBJECT.ZENDDATE+978307200,'UNIXEPOCH') as "END",
		DATETIME(ZOBJECT.ZCREATIONDATE + 978307200, 'UNIXEPOCH') AS "ENTRY CREATION",
		ZOBJECT.Z_PK AS "ZOBJECT TABLE ID" 
	FROM
	   ZOBJECT 
	   LEFT JOIN
	      ZSTRUCTUREDMETADATA 
	      ON ZOBJECT.ZSTRUCTUREDMETADATA = ZSTRUCTUREDMETADATA.Z_PK 
	   LEFT JOIN
	      ZSOURCE 
	      ON ZOBJECT.ZSOURCE = ZSOURCE.Z_PK 
	WHERE
	   ZSTREAMNAME IS "/portrait/entity"
